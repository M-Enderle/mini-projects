{% extends "layout.html" %}

{% block title %}Rezeptbuch{% endblock %}

{% block content %}
<section class="hero">
  <h1>Rezeptbuch</h1>
</section>

<form class="filters" method="post" action="{{ url_for('home') }}">
  <div class="field fullwidth">
    <label for="q">Suche</label>
    <input id="q" name="q" type="search" value="{{ query }}" placeholder="Zum Beispiel Zitrus, Pasta, Dessert ...">
  </div>
  <div class="actions">
    <button type="submit" class="button">Entdecken</button>
  </div>
</form>

  {% if recipes %}
<section class="grid">
  {% for recipe in recipes %}
  <article class="card">
    {% if recipe.image_url %}
    <a class="image" href="{{ url_for('recipe_detail', slug=recipe.slug) }}">
      <img src="{{ recipe.image_url }}" alt="{{ recipe.title }}">
    </a>
    {% endif %}
    <div class="card-body">
      <header>
        <p class="source">{{ recipe.source }}</p>
        <h2><a href="{{ url_for('recipe_detail', slug=recipe.slug) }}">{{ recipe.title }}</a></h2>
      </header>
      <p class="description">{{ recipe.description }}</p>
      <footer>
        <div class="tags">
          {% for tag in recipe.tags %}
          <span>{{ tag }}</span>
          {% endfor %}
        </div>
        
      </footer>
    </div>
  </article>
  {% endfor %}
</section>
{% else %}
<p class="empty">Noch keine Rezepte für diese Filter.</p>
{% endif %}

<footer class="admin-footer">
  <form method="post" action="{{ url_for('regenerate_embeddings') }}" style="display: inline;">
    <button type="submit" class="button-link" onclick="return confirm('Embeddings für alle Rezepte regenerieren?')">Embeddings regenerieren</button>
  </form>
</footer>
{% endblock %}

